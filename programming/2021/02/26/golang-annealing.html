<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Simulated Annealing in Go</title>
  <meta name="description" content="As Go is quickly becoming my favourite programming language in this post we will switch gears and we are going to implement an optimization algorithm - simul...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://alexandrugris.github.io/programming/2021/02/26/golang-annealing.html">
  <link rel="alternate" type="application/rss+xml" title="From The Trenches - The Code" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <div class="site-nav"><a class="site-title" href="/">From The Trenches - The Code</a> </div>

    <nav class="site-nav">
      <span class="menu-icon">        
      </span>

      <div class="trigger">

        <a class="page-link" href="https://alexandrugris.github.io">Home</a>

        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/sm/">Social Media</a>
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Simulated Annealing in Go</h1>
    <p class="post-meta"><time datetime="2021-02-26T09:15:16+02:00" itemprop="datePublished">Feb 26, 2021</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>As Go is quickly becoming my favourite programming language in this post we will switch gears and we are going to implement an optimization algorithm - simulated annealing. We are going to solve the travelling salesman problem and, in the process, we will build a graphical app and a bare bones charting library.</p>

<h3 id="simulated-annealing">Simulated Annealing</h3>

<p>Simulated annealing is an optimization algorithm used for solving complex problems where direct algorithmic solutions are hard to find. In cases where gradient descent cannot be used because the optimization function is not continuous we need a different approach, mostly based on trial and error. In such a situation, the solution is to make random moves in the solution space and only accept those moves that offer an optimization over the current state. However such moves can easily converge to a local optimum and get stuck. Therefore, a mechanism in needed to allow escape from the local optimum. Simulated annealing offers a solution to this problem allowing random non-optimal moves to be accepted with decreasing probability, based on a temperature schedule. The solution is borrowed from metalurgy where the steel is forged under slow cooling in order to allow for an optimal alignment of metal particles for increased durability.</p>

<p>For our problem the metric we want to optimize is the total length of the path. In the picture below you can see such a layout with a shortest path determined by the algorithm.</p>

<p><img src="https://alexandrugris.github.io/assets/sim_annealing2.jpg" alt="Simulated Annealing Travelling Salesman" /></p>

<p>For the very same configuration we see the total path length plotted for each iteration.It is interesting to see the inflection point where, after settling on a higher length equilibrium, an local optimum, and a random move, the total length resettles to another, global optimum. We also see how fewer and fewer random moves are accepted, with lower and lower distance increase.</p>

<p><img src="https://alexandrugris.github.io/assets/sim_annealing1.jpg" alt="Simulated Annealing Distance Evolution" /></p>

<h3 id="solution-implementation">Solution Implementation</h3>

<p>The full code is listed below. In short, we are computing the algorithm on a separate thread from the main rendering thread. The config can be reset by pressing <code class="highlighter-rouge">ESC</code>. You can add new points to the path by simply clicking somewhere on the screen. The distance evolution over each iteration can be displayed by pressing the <code class="highlighter-rouge">P</code> key.</p>

<p>The algorithm can be tuned by adjusting:</p>
<ul>
  <li>The total number of iterations</li>
  <li>The temperature decay function</li>
  <li>The function for the probability of acceptance of a bad move</li>
</ul>

<p>The algorithm has also a back step - if after accepting a bad move a better move is not found in a predefined number of steps, we backtrack to the best known configuration.</p>

<p>The move is made by randomly selecting two edges and switching their ends between themselves. Once the swap has been performed, in order fo maintain the path consistency, all edges between the two end points are inverted. This happens in the <code class="highlighter-rouge">ComputeNewPath</code> function.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
	</span><span class="s">"GoAI/plt"</span><span class="x">
	</span><span class="s">"fmt"</span><span class="x">
	</span><span class="s">"github.com/tfriedel6/canvas/sdlcanvas"</span><span class="x">
	</span><span class="s">"math"</span><span class="x">
	</span><span class="s">"math/rand"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Point</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">X</span><span class="x"> </span><span class="kt">float64</span><span class="x">
	</span><span class="n">Y</span><span class="x"> </span><span class="kt">float64</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Connection</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">Start</span><span class="x"> </span><span class="kt">int</span><span class="x">
	</span><span class="n">End</span><span class="x">   </span><span class="kt">int</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">p</span><span class="x"> </span><span class="o">*</span><span class="n">Point</span><span class="p">)</span><span class="x"> </span><span class="n">Subtract</span><span class="p">(</span><span class="n">other</span><span class="x"> </span><span class="o">*</span><span class="n">Point</span><span class="p">)</span><span class="x"> </span><span class="n">Point</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">Point</span><span class="p">{</span><span class="x">
		</span><span class="n">X</span><span class="o">:</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">X</span><span class="x"> </span><span class="o">-</span><span class="x"> </span><span class="n">other</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="x">
		</span><span class="n">Y</span><span class="o">:</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Y</span><span class="x"> </span><span class="o">-</span><span class="x"> </span><span class="n">other</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span><span class="x">
	</span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">p</span><span class="x"> </span><span class="o">*</span><span class="n">Point</span><span class="p">)</span><span class="x"> </span><span class="n">DistanceTo</span><span class="p">(</span><span class="n">other</span><span class="x"> </span><span class="o">*</span><span class="n">Point</span><span class="p">)</span><span class="x"> </span><span class="kt">float64</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">d</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">other</span><span class="o">.</span><span class="n">Subtract</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">math</span><span class="o">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">X</span><span class="o">*</span><span class="n">d</span><span class="o">.</span><span class="n">X</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="n">d</span><span class="o">.</span><span class="n">Y</span><span class="o">*</span><span class="n">d</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">ConnsCollection</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">Points</span><span class="x"> </span><span class="p">[]</span><span class="n">Point</span><span class="x">
	</span><span class="n">Conns</span><span class="x">  </span><span class="p">[]</span><span class="n">Connection</span><span class="x">

	</span><span class="c">// map ending to index in Conn</span><span class="x">
	</span><span class="n">endsIn</span><span class="x"> </span><span class="p">[]</span><span class="kt">int</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">cc</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x"> </span><span class="n">BuildEndsInMap</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">if</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="o">||</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="p">)</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="p">))</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="p">,</span><span class="x"> </span><span class="n">cn</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="p">[</span><span class="n">cn</span><span class="o">.</span><span class="n">End</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">i</span><span class="x">
	</span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">cc</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x"> </span><span class="n">ComputeDistance</span><span class="p">()</span><span class="x"> </span><span class="p">(</span><span class="kt">float64</span><span class="p">,</span><span class="x"> </span><span class="kt">bool</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">d</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0.0</span><span class="x">
	</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">Start</span><span class="x"> </span><span class="o">&gt;=</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">Points</span><span class="p">)</span><span class="x"> </span><span class="o">||</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="x"> </span><span class="o">&gt;=</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">Points</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="k">return</span><span class="x"> </span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="x"> </span><span class="no">false</span><span class="x">
		</span><span class="p">}</span><span class="x">
		</span><span class="n">d</span><span class="x"> </span><span class="o">+=</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">Start</span><span class="p">]</span><span class="o">.</span><span class="n">DistanceTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cc</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="p">])</span><span class="x">
	</span><span class="p">}</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="no">true</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">cc</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x"> </span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="n">other</span><span class="x"> </span><span class="o">**</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">if</span><span class="x"> </span><span class="o">*</span><span class="n">other</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="o">*</span><span class="n">other</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">ConnsCollection</span><span class="p">{</span><span class="x">
			</span><span class="n">Points</span><span class="o">:</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Points</span><span class="p">,</span><span class="x">
			</span><span class="n">Conns</span><span class="o">:</span><span class="x">  </span><span class="nb">make</span><span class="p">([]</span><span class="n">Connection</span><span class="p">,</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="p">)),</span><span class="x">
			</span><span class="n">endsIn</span><span class="o">:</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="p">)),</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="nb">copy</span><span class="p">((</span><span class="o">*</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">Conns</span><span class="p">,</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="p">)</span><span class="x">
	</span><span class="nb">copy</span><span class="p">((</span><span class="o">*</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">endsIn</span><span class="p">,</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="p">)</span><span class="x">

</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">cc</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x"> </span><span class="n">ComputeNewPath</span><span class="p">()</span><span class="x"> </span><span class="kt">float64</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">conns</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="x">

	</span><span class="k">if</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">conns</span><span class="p">)</span><span class="x"> </span><span class="o">&lt;=</span><span class="x"> </span><span class="m">1</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">return</span><span class="x"> </span><span class="m">0.0</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">i1</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">rand</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span><span class="x"> </span><span class="o">%</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">conns</span><span class="p">)</span><span class="x">
	</span><span class="n">i2</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">rand</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span><span class="x"> </span><span class="o">%</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">conns</span><span class="p">)</span><span class="x">
	</span><span class="k">if</span><span class="x"> </span><span class="n">i1</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="n">i2</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">i2</span><span class="o">++</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="n">i2</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">conns</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">i2</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">0</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">p1</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">conns</span><span class="p">[</span><span class="n">i1</span><span class="p">]</span><span class="x">
	</span><span class="n">p2</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">conns</span><span class="p">[</span><span class="n">i2</span><span class="p">]</span><span class="x">

	</span><span class="c">// swap edges</span><span class="x">
	</span><span class="n">p1</span><span class="o">.</span><span class="n">End</span><span class="p">,</span><span class="x"> </span><span class="n">p2</span><span class="o">.</span><span class="n">Start</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">p2</span><span class="o">.</span><span class="n">Start</span><span class="p">,</span><span class="x"> </span><span class="n">p1</span><span class="o">.</span><span class="n">End</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">idx</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">p1</span><span class="o">.</span><span class="n">End</span><span class="p">;</span><span class="x"> </span><span class="n">idx</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="n">p2</span><span class="o">.</span><span class="n">Start</span><span class="p">;</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">conns</span><span class="p">[</span><span class="n">cc</span><span class="o">.</span><span class="n">endsIn</span><span class="p">[</span><span class="n">idx</span><span class="p">]]</span><span class="x">
		</span><span class="n">c</span><span class="o">.</span><span class="n">Start</span><span class="p">,</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="p">,</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">Start</span><span class="x">
		</span><span class="n">idx</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">ComputeDistance</span><span class="p">()</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">d</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">InitConnectionsFromPoints</span><span class="p">(</span><span class="n">points</span><span class="x"> </span><span class="p">[]</span><span class="n">Point</span><span class="p">)</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ConnsCollection</span><span class="p">{</span><span class="x">
		</span><span class="n">Points</span><span class="o">:</span><span class="x"> </span><span class="n">points</span><span class="p">,</span><span class="x">
		</span><span class="n">Conns</span><span class="o">:</span><span class="x">  </span><span class="nb">make</span><span class="p">([]</span><span class="n">Connection</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">20</span><span class="p">),</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="c">// crate a path where each point is travelled only once</span><span class="x">
	</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">Points</span><span class="x"> </span><span class="p">{</span><span class="x">

		</span><span class="n">s</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">i</span><span class="x">
		</span><span class="n">e</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="m">1</span><span class="x">

		</span><span class="k">if</span><span class="x"> </span><span class="n">e</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">Points</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">e</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">0</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="n">c</span><span class="o">.</span><span class="n">Conns</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">Conns</span><span class="p">,</span><span class="x"> </span><span class="n">Connection</span><span class="p">{</span><span class="x">
			</span><span class="n">Start</span><span class="o">:</span><span class="x"> </span><span class="n">s</span><span class="p">,</span><span class="x">
			</span><span class="n">End</span><span class="o">:</span><span class="x">   </span><span class="n">e</span><span class="p">,</span><span class="x">
		</span><span class="p">})</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">c</span><span class="o">.</span><span class="n">BuildEndsInMap</span><span class="p">()</span><span class="x">

	</span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">c</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">TravellingSalesman</span><span class="p">(</span><span class="n">in</span><span class="x"> </span><span class="o">&lt;-</span><span class="k">chan</span><span class="x"> </span><span class="p">[]</span><span class="n">Point</span><span class="p">,</span><span class="x"> </span><span class="n">out</span><span class="x"> </span><span class="k">chan</span><span class="o">&lt;-</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="p">{</span><span class="x">

		</span><span class="c">// read all points and only start the computation once I finished points</span><span class="x">
		</span><span class="n">points</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">in</span><span class="x">
		</span><span class="k">for</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="m">0</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">points</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">in</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="k">var</span><span class="x"> </span><span class="n">conns</span><span class="p">,</span><span class="x"> </span><span class="n">conns2</span><span class="p">,</span><span class="x"> </span><span class="n">resetPoint</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="x">
		</span><span class="n">conns</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">InitConnectionsFromPoints</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="x">
		</span><span class="n">conns</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conns2</span><span class="p">)</span><span class="x">
		</span><span class="n">conns</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">resetPoint</span><span class="p">)</span><span class="x">

		</span><span class="n">d</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">conns</span><span class="o">.</span><span class="n">ComputeDistance</span><span class="p">()</span><span class="x">
		</span><span class="n">dReset</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">d</span><span class="x">
		</span><span class="n">MaxDriftFromGlobalMinimum</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">10</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="x">
		</span><span class="n">countSinceReset</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">MaxDriftFromGlobalMinimum</span><span class="x">

		</span><span class="n">MaxIterations</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">100000</span><span class="x">
		</span><span class="n">distanceEvolution</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="kt">float64</span><span class="p">,</span><span class="x"> </span><span class="n">MaxIterations</span><span class="p">)</span><span class="x">

		</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">MaxIterations</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">

			</span><span class="n">temperature</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0.1</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">MaxIterations</span><span class="o">-</span><span class="n">i</span><span class="p">)</span><span class="x"> </span><span class="o">/</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">MaxIterations</span><span class="p">)</span><span class="x">
			</span><span class="n">temperature</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">temperature</span><span class="p">,</span><span class="x"> </span><span class="m">5</span><span class="p">)</span><span class="x">

			</span><span class="c">// switch two nodes</span><span class="x">
			</span><span class="n">d2</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">conns2</span><span class="o">.</span><span class="n">ComputeNewPath</span><span class="p">()</span><span class="x">

			</span><span class="c">// found a better move</span><span class="x">
			</span><span class="c">// or the temperature is high enough to accept other moves</span><span class="x">
			</span><span class="k">if</span><span class="x"> </span><span class="n">d2</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">d</span><span class="x"> </span><span class="o">||</span><span class="x"> </span><span class="p">(</span><span class="n">d2</span><span class="o">-</span><span class="n">d</span><span class="p">)</span><span class="o">*</span><span class="n">temperature</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

				</span><span class="k">if</span><span class="x"> </span><span class="n">d2</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="n">d</span><span class="x"> </span><span class="o">&amp;&amp;</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="p">(</span><span class="n">MaxIterations</span><span class="o">/</span><span class="m">100</span><span class="p">)</span><span class="o">*</span><span class="m">50</span><span class="x"> </span><span class="p">{</span><span class="x">
					</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Accepted bad move: iter: %v, temp: %v, distance: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">i</span><span class="p">,</span><span class="x"> </span><span class="n">temperature</span><span class="p">,</span><span class="x"> </span><span class="n">d2</span><span class="o">-</span><span class="n">d</span><span class="p">)</span><span class="x">
				</span><span class="p">}</span><span class="x">

				</span><span class="n">conns2</span><span class="o">.</span><span class="n">BuildEndsInMap</span><span class="p">()</span><span class="x">
				</span><span class="n">conns2</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conns</span><span class="p">)</span><span class="x">
				</span><span class="n">d</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">d2</span><span class="x">

				</span><span class="k">if</span><span class="x"> </span><span class="n">d</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">dReset</span><span class="x"> </span><span class="p">{</span><span class="x">
					</span><span class="n">dReset</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">d</span><span class="x">
					</span><span class="n">countSinceReset</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">MaxDriftFromGlobalMinimum</span><span class="x">
					</span><span class="n">conns2</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">resetPoint</span><span class="p">)</span><span class="x">
				</span><span class="p">}</span><span class="x">

			</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="k">if</span><span class="x"> </span><span class="n">countSinceReset</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">0</span><span class="x"> </span><span class="p">{</span><span class="x">
				</span><span class="n">d</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">dReset</span><span class="x">
				</span><span class="n">countSinceReset</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">MaxDriftFromGlobalMinimum</span><span class="x">
				</span><span class="n">resetPoint</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conns</span><span class="p">)</span><span class="x">
				</span><span class="n">resetPoint</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conns2</span><span class="p">)</span><span class="x">
				</span><span class="c">//fmt.Println("Reset")</span><span class="x">
			</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
				</span><span class="n">conns</span><span class="o">.</span><span class="n">DuplicateConnectionsTo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">conns2</span><span class="p">)</span><span class="x"> </span><span class="c">// re-init conns2</span><span class="x">
			</span><span class="p">}</span><span class="x">

			</span><span class="n">countSinceReset</span><span class="o">--</span><span class="x">

			</span><span class="c">// save for analysis</span><span class="x">
			</span><span class="n">distanceEvolution</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">d</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="n">plt</span><span class="o">.</span><span class="n">Reset</span><span class="p">()</span><span class="x">
		</span><span class="n">plt</span><span class="o">.</span><span class="n">LinePlot</span><span class="p">(</span><span class="n">distanceEvolution</span><span class="p">,</span><span class="x"> </span><span class="s">"Distance Evolution"</span><span class="p">,</span><span class="x"> </span><span class="m">1000</span><span class="p">)</span><span class="x">

		</span><span class="k">if</span><span class="x"> </span><span class="n">d</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="n">dReset</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">out</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">resetPoint</span><span class="x">
		</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">out</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">conns</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">wnd</span><span class="p">,</span><span class="x"> </span><span class="n">cv</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">sdlcanvas</span><span class="o">.</span><span class="n">CreateWindow</span><span class="p">(</span><span class="m">1280</span><span class="p">,</span><span class="x"> </span><span class="m">720</span><span class="p">,</span><span class="x"> </span><span class="s">"Travelling Salesman"</span><span class="p">)</span><span class="x">
	</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
	</span><span class="p">}</span><span class="x">
	</span><span class="k">defer</span><span class="x"> </span><span class="n">wnd</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span><span class="x">

	</span><span class="n">points</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="n">Point</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">)</span><span class="x">
	</span><span class="n">connections</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="n">Connection</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">)</span><span class="x">
	</span><span class="n">distance</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0.0</span><span class="x">

	</span><span class="n">submitPoints</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="p">[]</span><span class="n">Point</span><span class="p">,</span><span class="x"> </span><span class="m">100</span><span class="p">)</span><span class="x">
	</span><span class="n">receiveConnections</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="o">*</span><span class="n">ConnsCollection</span><span class="p">)</span><span class="x">

	</span><span class="k">go</span><span class="x"> </span><span class="n">TravellingSalesman</span><span class="p">(</span><span class="n">submitPoints</span><span class="p">,</span><span class="x"> </span><span class="n">receiveConnections</span><span class="p">)</span><span class="x">

	</span><span class="n">wnd</span><span class="o">.</span><span class="n">MouseDown</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">btn</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">x</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="c">// on mouse down add new points</span><span class="x">
		</span><span class="n">points</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">points</span><span class="p">,</span><span class="x"> </span><span class="n">Point</span><span class="p">{</span><span class="x">
			</span><span class="n">X</span><span class="o">:</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="x">
			</span><span class="n">Y</span><span class="o">:</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="x">
		</span><span class="p">})</span><span class="x">

		</span><span class="c">// send the points to be computed</span><span class="x">
		</span><span class="n">submitPoints</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">points</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">wnd</span><span class="o">.</span><span class="n">KeyDown</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">scancode</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">rn</span><span class="x"> </span><span class="kt">rune</span><span class="p">,</span><span class="x"> </span><span class="n">name</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">switch</span><span class="x"> </span><span class="n">name</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">case</span><span class="x"> </span><span class="s">"Escape"</span><span class="o">:</span><span class="x">
			</span><span class="n">points</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="n">Point</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">)</span><span class="x">
			</span><span class="n">connections</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="n">Connection</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">)</span><span class="x">
			</span><span class="n">distance</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">0.0</span><span class="x">
		</span><span class="k">case</span><span class="x"> </span><span class="s">"KeyP"</span><span class="o">:</span><span class="x">
			</span><span class="n">plt</span><span class="o">.</span><span class="n">Execute</span><span class="p">()</span><span class="x"> </span><span class="c">// show plot only when key is pressed</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">wnd</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">(</span><span class="k">func</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

		</span><span class="k">select</span><span class="x"> </span><span class="p">{</span><span class="x">

		</span><span class="k">case</span><span class="x"> </span><span class="n">cc</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">receiveConnections</span><span class="o">:</span><span class="x">
			</span><span class="k">if</span><span class="x"> </span><span class="n">dd</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">ComputeDistance</span><span class="p">();</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
				</span><span class="n">distance</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">dd</span><span class="x">
				</span><span class="n">connections</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">cc</span><span class="o">.</span><span class="n">Conns</span><span class="x">
				</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"New paths with distance %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">distance</span><span class="p">)</span><span class="x">
			</span><span class="p">}</span><span class="x">

		</span><span class="k">default</span><span class="o">:</span><span class="x">

		</span><span class="p">}</span><span class="x">

		</span><span class="c">// background</span><span class="x">
		</span><span class="n">w</span><span class="p">,</span><span class="x"> </span><span class="n">h</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">cv</span><span class="o">.</span><span class="n">Width</span><span class="p">()),</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">cv</span><span class="o">.</span><span class="n">Height</span><span class="p">())</span><span class="x">
		</span><span class="n">cv</span><span class="o">.</span><span class="n">SetFillStyle</span><span class="p">(</span><span class="s">"#000"</span><span class="p">)</span><span class="x">
		</span><span class="n">cv</span><span class="o">.</span><span class="n">FillRect</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="n">w</span><span class="p">,</span><span class="x"> </span><span class="n">h</span><span class="p">)</span><span class="x">

		</span><span class="c">// circles</span><span class="x">
		</span><span class="n">cv</span><span class="o">.</span><span class="n">SetStrokeStyle</span><span class="p">(</span><span class="s">"#FFF"</span><span class="p">)</span><span class="x">
		</span><span class="n">cv</span><span class="o">.</span><span class="n">SetLineWidth</span><span class="p">(</span><span class="m">2</span><span class="p">)</span><span class="x">
		</span><span class="n">cv</span><span class="o">.</span><span class="n">SetFillStyle</span><span class="p">(</span><span class="m">255</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">)</span><span class="x">

		</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">connections</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">BeginPath</span><span class="p">()</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">MoveTo</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">Start</span><span class="p">]</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="x"> </span><span class="n">points</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">Start</span><span class="p">]</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">LineTo</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="p">]</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="x"> </span><span class="n">points</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">End</span><span class="p">]</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">Stroke</span><span class="p">()</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">points</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">BeginPath</span><span class="p">()</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">Arc</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="n">math</span><span class="o">.</span><span class="n">Pi</span><span class="o">*</span><span class="m">2</span><span class="p">,</span><span class="x"> </span><span class="no">false</span><span class="p">)</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">ClosePath</span><span class="p">()</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">Fill</span><span class="p">()</span><span class="x">
			</span><span class="n">cv</span><span class="o">.</span><span class="n">Stroke</span><span class="p">()</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="n">cv</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="s">"Righteous-Regular.ttf"</span><span class="p">,</span><span class="x"> </span><span class="m">12</span><span class="p">)</span><span class="x">
		</span><span class="n">cv</span><span class="o">.</span><span class="n">FillText</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"Total distance: %f"</span><span class="p">,</span><span class="x"> </span><span class="n">distance</span><span class="p">),</span><span class="x"> </span><span class="m">20</span><span class="p">,</span><span class="x"> </span><span class="m">20</span><span class="p">)</span><span class="x">

	</span><span class="p">})</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre></div></div>

<h3 id="easy-charting-from-go">Easy Charting From Go</h3>

<p>Since I couldnt find any charting library that met my needs, being easy to use from a desktop application, Ive decided to build my own. It relies on the excellent matplotlib library from python. The solution is simple: it generates a python script containing all the values I need to plot and then it launches that script in a separate process with its own window. For this we are using golang text templates to generate the script. I will extend the library for future use with other types of charts. Below you can see the code:</p>

<p>The template:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import matplotlib.pyplot as plt

 

values=
plt.plot(values)

 

plt.show()
</code></pre></div></div>

<p>The code for generating the template:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">plt</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
	</span><span class="s">"fmt"</span><span class="x">
	</span><span class="s">"io/ioutil"</span><span class="x">
	</span><span class="s">"log"</span><span class="x">
	</span><span class="s">"os"</span><span class="x">
	</span><span class="s">"os/exec"</span><span class="x">
	</span><span class="s">"strings"</span><span class="x">
	</span><span class="s">"text/template"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Plot</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">Type</span><span class="x">   </span><span class="kt">string</span><span class="x">
	</span><span class="n">Values</span><span class="x"> </span><span class="p">[][]</span><span class="kt">float64</span><span class="x">
	</span><span class="n">Name</span><span class="x">   </span><span class="kt">string</span><span class="x">
	</span><span class="n">Count</span><span class="x">  </span><span class="kt">int</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">var</span><span class="x"> </span><span class="n">plots</span><span class="x"> </span><span class="p">[]</span><span class="n">Plot</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">tmpl</span><span class="x"> </span><span class="o">*</span><span class="n">template</span><span class="o">.</span><span class="n">Template</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="no">nil</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">min</span><span class="p">(</span><span class="n">a</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">b</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="k">if</span><span class="x"> </span><span class="n">a</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">b</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">return</span><span class="x"> </span><span class="n">a</span><span class="x">
	</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">return</span><span class="x"> </span><span class="n">b</span><span class="x">
	</span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">compressByMean</span><span class="p">(</span><span class="n">count</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">arr</span><span class="x"> </span><span class="p">[]</span><span class="kt">float64</span><span class="p">)</span><span class="x"> </span><span class="p">[]</span><span class="kt">float64</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">ret</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="kt">float64</span><span class="p">,</span><span class="x"> </span><span class="n">count</span><span class="p">)</span><span class="x">
	</span><span class="n">intvLen</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="x"> </span><span class="o">/</span><span class="x"> </span><span class="n">count</span><span class="x">
	</span><span class="n">cnt</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="kt">float64</span><span class="p">(</span><span class="n">intvLen</span><span class="p">)</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">count</span><span class="o">-</span><span class="m">1</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">

		</span><span class="n">upperLimit</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="p">(</span><span class="n">i</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="m">1</span><span class="p">)</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">intvLen</span><span class="x">
		</span><span class="n">lowerLimit</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">intvLen</span><span class="x">

		</span><span class="n">ret</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">arr</span><span class="p">[</span><span class="n">lowerLimit</span><span class="p">]</span><span class="x"> </span><span class="o">/</span><span class="x"> </span><span class="n">cnt</span><span class="x">

		</span><span class="k">for</span><span class="x"> </span><span class="n">j</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">lowerLimit</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="m">1</span><span class="p">;</span><span class="x"> </span><span class="n">j</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">upperLimit</span><span class="p">;</span><span class="x"> </span><span class="n">j</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">ret</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="x"> </span><span class="o">+=</span><span class="x"> </span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="x"> </span><span class="o">/</span><span class="x"> </span><span class="n">cnt</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="c">// last one is the last value - a hack for the simulated annealing problem</span><span class="x">
	</span><span class="n">ret</span><span class="p">[</span><span class="n">count</span><span class="o">-</span><span class="m">1</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">arr</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">]</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">ret</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">toPythonArray</span><span class="p">(</span><span class="n">arr</span><span class="x"> </span><span class="p">[]</span><span class="kt">float64</span><span class="p">)</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">sb</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">Builder</span><span class="p">{}</span><span class="x">
	</span><span class="n">sb</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s">"["</span><span class="p">)</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="p">,</span><span class="x"> </span><span class="n">v</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">arr</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">sb</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%f"</span><span class="p">,</span><span class="x"> </span><span class="n">v</span><span class="p">))</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">sb</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s">", "</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">sb</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s">"]"</span><span class="p">)</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">sb</span><span class="o">.</span><span class="n">String</span><span class="p">()</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">init</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">Getwd</span><span class="p">())</span><span class="x">

	</span><span class="n">fn</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">template</span><span class="o">.</span><span class="n">FuncMap</span><span class="p">{</span><span class="x">
		</span><span class="s">"CompressByMean"</span><span class="o">:</span><span class="x"> </span><span class="n">compressByMean</span><span class="p">,</span><span class="x">
		</span><span class="s">"ToPythonArray"</span><span class="o">:</span><span class="x">  </span><span class="n">toPythonArray</span><span class="p">,</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">tmpl</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">template</span><span class="o">.</span><span class="n">Must</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"chart_template.gopy"</span><span class="p">)</span><span class="o">.</span><span class="n">Funcs</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span><span class="o">.</span><span class="n">ParseFiles</span><span class="p">(</span><span class="s">"chart_template.gopy"</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">LinePlot</span><span class="p">(</span><span class="n">arr</span><span class="x"> </span><span class="p">[]</span><span class="kt">float64</span><span class="p">,</span><span class="x"> </span><span class="n">name</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">count</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">v</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">Plot</span><span class="p">{</span><span class="x">
		</span><span class="n">Type</span><span class="o">:</span><span class="x">   </span><span class="s">"line"</span><span class="p">,</span><span class="x">
		</span><span class="n">Values</span><span class="o">:</span><span class="x"> </span><span class="nb">make</span><span class="p">([][]</span><span class="kt">float64</span><span class="p">,</span><span class="x"> </span><span class="m">1</span><span class="p">),</span><span class="x">
		</span><span class="n">Name</span><span class="o">:</span><span class="x">   </span><span class="n">name</span><span class="p">,</span><span class="x">
		</span><span class="n">Count</span><span class="o">:</span><span class="x">  </span><span class="n">count</span><span class="p">,</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="n">v</span><span class="o">.</span><span class="n">Values</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">arr</span><span class="x">
	</span><span class="n">plots</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">plots</span><span class="p">,</span><span class="x"> </span><span class="n">v</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">Reset</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="c">// clear the plots</span><span class="x">
	</span><span class="n">plots</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">Execute</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">var</span><span class="x"> </span><span class="n">fileName</span><span class="x"> </span><span class="kt">string</span><span class="x">

	</span><span class="k">func</span><span class="p">(</span><span class="n">fn</span><span class="x"> </span><span class="o">*</span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">f</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">TempFile</span><span class="p">(</span><span class="s">"./plots"</span><span class="p">,</span><span class="x"> </span><span class="s">"plt*.py"</span><span class="p">)</span><span class="x">

		</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
			</span><span class="k">return</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="k">defer</span><span class="x"> </span><span class="n">f</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
		</span><span class="o">*</span><span class="n">fn</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">f</span><span class="o">.</span><span class="n">Name</span><span class="p">()</span><span class="x">

		</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">tmpl</span><span class="o">.</span><span class="n">Execute</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="x"> </span><span class="n">plots</span><span class="p">);</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">log</span><span class="o">.</span><span class="n">Panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x">

		</span><span class="n">Reset</span><span class="p">()</span><span class="x">

	</span><span class="p">}(</span><span class="o">&amp;</span><span class="n">fileName</span><span class="p">)</span><span class="x">

	</span><span class="k">go</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">fileName</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="n">out</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">exec</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s">"python"</span><span class="p">,</span><span class="x"> </span><span class="n">fileName</span><span class="p">)</span><span class="o">.</span><span class="n">Output</span><span class="p">();</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
			</span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">out</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">out</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}(</span><span class="n">fileName</span><span class="p">)</span><span class="x">

</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>


  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">From The Trenches - The Code</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              From The Trenches - The Code
            
            </li>
            
            <li><a href="mailto:alexandru.gris2006@gmail.com">alexandru.gris2006@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/alexandrugris"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">alexandrugris</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/alexandrugris"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">alexandrugris</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Alexandru Gris - Personal Blog
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
